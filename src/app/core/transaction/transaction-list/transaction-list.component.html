<p-fieldset legend="Transactions" [toggleable]="true">
    <div class="p-2 flex gap-3 bg-surface-0 light:bg-surface-950 transaction-list-wrapper">
        <p-table #txTable
                 [value]="transactions" stripedRows
                 [tableStyle]="{'width': '100%; max-height: 50%'}"
                 [paginator]="true"
                 [rows]="25"
                 [paginatorPosition]="'bottom'"
                 [showCurrentPageReport]="true"
                 [currentPageReportTemplate]="'{first} to {last} of {totalRecords}'"
                 [scrollable]="true"
                 scrollHeight="1000px"
                 class="font-medium"
                 styleClass="w-full">
            <ng-template pTemplate="header"  class="font-medium">
                <tr class="font-medium">
                    <th pSortableColumn>
                        ID
                    </th>
                    <th pSortableColumn="amount">
                        <div class="flex items-center gap-2">
                            Amount
                            <p-sortIcon field="amount"/>
                        </div>
                    </th>
                    <th pSortableColumn="transactionDate">
                        <div class="flex items-center gap-2">
                            Date
                            <p-sortIcon field="transactionDate"/>
                        </div>
                    </th>
                    <th>Category</th>
                    <th>Details</th>
                    <th>Recipient name</th>
                    <th>Sender name</th>
                    <th>Bank</th>
                    <th>Source</th>
                </tr>
                <tr class="font-medium">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th [ngClass]="{'tx-filter-header-highlight': hoveredField === 'category'}">
                        <p-columnFilter
                                type="text"
                                matchMode="contains"
                                field="category"
                                placeholder="Type to search"
                                ariaLabel="Filter category"
                                filterOn="input">
                        </p-columnFilter>
                    </th>
                    <th [ngClass]="{'tx-filter-header-highlight': hoveredField === 'details'}">
                        <p-columnFilter
                                type="text"
                                matchMode="contains"
                                field="details"
                                placeholder="Type to search"
                                ariaLabel="Filter details"
                                filterOn="input">
                        </p-columnFilter>
                    </th>
                    <th [ngClass]="{'tx-filter-header-highlight': hoveredField === 'recipientName'}">
                        <p-columnFilter
                                type="text"
                                matchMode="contains"
                                field="recipientName"
                                placeholder="Type to search"
                                ariaLabel="Filter recipient"
                                filterOn="input">
                        </p-columnFilter>
                    </th>
                    <th [ngClass]="{'tx-filter-header-highlight': hoveredField === 'senderName'}">
                        <p-columnFilter
                                type="text"
                                matchMode="contains"
                                field="senderName"
                                placeholder="Type to search"
                                ariaLabel="Filter sender"
                                filterOn="input">
                        </p-columnFilter>
                    </th>
                    <th [ngClass]="{'tx-filter-header-highlight': hoveredField === 'bank'}">
                        <p-columnFilter
                                type="text"
                                matchMode="contains"
                                field="bank"
                                placeholder="Type to search"
                                ariaLabel="Filter bank"
                                filterOn="input">
                        </p-columnFilter>
                    </th>
                    <th [ngClass]="{'tx-filter-header-highlight': hoveredField === 'source'}">
                        <p-columnFilter
                                type="text"
                                matchMode="contains"
                                field="source"
                                placeholder="Type to search"
                                ariaLabel="Filter source"
                                filterOn="input">
                        </p-columnFilter>
                    </th>
                </tr>
            </ng-template>
            <ng-template let-transaction pTemplate="body"  class="font-medium">
                <tr class="text-sm font-medium leading-tight dark:text-surface-0 text-muted-color">
                    <td style="width: 3rem">#{{ transaction.id }}</td>
                    <td style="width: 4rem">
                        <div *ngIf="transaction.transactionType == 'INCOME'">
                            <div class="text-green-500 cell-right" style="text-align: right; width: 5rem">
                                {{ transaction.amount | currency: ' ':'code':'2.2-2' }}
                            </div>
                        </div>
                        <div *ngIf="transaction.transactionType == 'EXPENSE'">
                            <div class="text-red-500 cell-right" style="text-align: right; width: 5rem">
                                {{ transaction.amount | currency: ' ':'code':'2.2-2' }}
                            </div>
                        </div>
                    </td>
                    <td style="width: 7rem">{{ transaction.transactionDate }}</td>
                    <td class="tx-clickable-cell"
                        (mouseenter)="onFilterCellHover('category', true)"
                        (mouseleave)="onFilterCellHover('category', false)"
                        (click)="onFilterCellClick('category', transaction.category, $event)">
                        <p-tag
                                pStyleClass="font-medium"
                                data-p="success"
                                class="font-medium p-component p-tag p-tag-success"
                                [style.backgroundColor]="resolveColor(transaction.category)"
                                [style.borderColor]="resolveColor(transaction.category)"
                                [style.color]="resolveFontColor(resolveColor(transaction.category))"
                                data-pc-section="root"
                                data-pc-name="t">
                                <span class="p-tag-label" data-pc-section="label">
                                    {{ transaction.category }}
                                </span>
                        </p-tag>
                    </td>
                    <td class="tx-clickable-cell"
                        (mouseenter)="onFilterCellHover('details', true)"
                        (mouseleave)="onFilterCellHover('details', false)"
                        (click)="onFilterCellClick('details', transaction.details, $event)">
                        {{ transaction.details }}
                    </td>
                    <td class="tx-clickable-cell"
                        (mouseenter)="onFilterCellHover('recipientName', true)"
                        (mouseleave)="onFilterCellHover('recipientName', false)"
                        (click)="onFilterCellClick('recipientName', transaction.recipientName, $event)">
                        {{ transaction.recipientName }}
                    </td>
                    <td class="tx-clickable-cell"
                        (mouseenter)="onFilterCellHover('senderName', true)"
                        (mouseleave)="onFilterCellHover('senderName', false)"
                        (click)="onFilterCellClick('senderName', transaction.senderName, $event)">
                        {{ transaction.senderName }}
                    </td>
                    <td class="tx-clickable-cell" style="width: 10rem"
                        (mouseenter)="onFilterCellHover('bank', true)"
                        (mouseleave)="onFilterCellHover('bank', false)"
                        (click)="onFilterCellClick('bank', transaction.bank, $event)">
                        {{ transaction.bank }}
                    </td>
                    <td class="tx-clickable-cell" style="width: 14rem"
                        (mouseenter)="onFilterCellHover('source', true)"
                        (mouseleave)="onFilterCellHover('source', false)"
                        (click)="onFilterCellClick('source', transaction.source, $event)">
                        {{ transaction.source }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</p-fieldset>
