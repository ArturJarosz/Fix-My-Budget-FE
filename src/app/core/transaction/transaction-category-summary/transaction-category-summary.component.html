<p-fieldset legend="Category summary" [toggleable]="true">
    <div class="flex justify-content-between align-items-center gap-3">
        <div class="flex-1 rounded-2xl border border-surface-200">
            <div class="p-1" *ngIf="rows.length; else noData">
                <p-table
                        [value]="expenseRows"
                        stripedRows
                        [tableStyle]="{'width': '100%; max-height: 50%'}"
                        class="font-medium full-width"
                        styleClass="w-full">>
                    <ng-template pTemplate="header" class="font-medium full-width">
                        <tr class="font-medium full-width">
                            <th>Category</th>
                            <th>Transactions</th>
                            <th>Sum</th>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-row>
                        <tr class="text-sm font-medium leading-tight dark:text-surface-0 text-muted-color">
                            <td>
                                <p-tag
                                        pStyleClass="font-medium"
                                        data-p="success"
                                        class="font-medium p-component p-tag p-tag-success"
                                        [style.backgroundColor]="resolveColor(row.categoryName)"
                                        [style.borderColor]="resolveColor(row.categoryName)"
                                        [style.color]="resolveFontColor(resolveColor(row.categoryName))"
                                        data-pc-section="root"
                                        data-pc-name="t">
                        <span class="p-tag-label" data-pc-section="label"
                        >{{ row.categoryName }}</span></p-tag>
                            </td>
                            <td style="width: 7rem" class="tcs-cell-number">{{ row.transactionCount }}</td>
                            <td class="tcs-cell-number">
                                {{ row.totalAmount | currency }}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>

                <div class="tcs-summary-footer p-2">
                    <div>Expense total: {{ totalExpense | currency }}</div>
                </div>
            </div>
        </div>
        <div class="flex-1 rounded-2xl border border-surface-200">
            <div class="p-1" *ngIf="rows.length; else noData">
                <p-table
                        [value]="incomeRows"
                        stripedRows
                        [tableStyle]="{'width': '100%; max-height: 50%'}"
                        class="font-medium full-width"
                        styleClass="w-full">>
                    <ng-template pTemplate="header" class="font-medium full-width">
                        <tr class="font-medium full-width">
                            <th>Category</th>
                            <th>Transactions</th>
                            <th>Sum</th>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-row>
                        <tr class="text-sm font-medium leading-tight dark:text-surface-0 text-muted-color">
                            <td>
                                <p-tag
                                        pStyleClass="font-medium"
                                        data-p="success"
                                        class="font-medium p-component p-tag p-tag-success"
                                        [style.backgroundColor]="resolveColor(row.categoryName)"
                                        [style.borderColor]="resolveColor(row.categoryName)"
                                        [style.color]="resolveFontColor(resolveColor(row.categoryName))"
                                        data-pc-section="root"
                                        data-pc-name="t">
                        <span class="p-tag-label" data-pc-section="label"
                        >{{ row.categoryName }}</span></p-tag>
                            </td>
                            <td style="width: 7rem" class="tcs-cell-number">{{ row.transactionCount }}</td>
                            <td class="tcs-cell-number">
                                {{ row.totalAmount | currency }}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>

                <div class="tcs-summary-footer p-2">
                    <div>Income total: {{ totalIncome | currency }}</div>
                </div>
            </div>
        </div>
    </div>
    <ng-template #noData>
        <div class="tcs-empty">
            No transactions to summarize.
        </div>
    </ng-template>
</p-fieldset>
